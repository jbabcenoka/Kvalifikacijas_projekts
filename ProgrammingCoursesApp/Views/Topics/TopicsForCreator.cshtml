@model ProgrammingCoursesApp.Models.Course

@{
    ViewData["Title"] = "Topics";
    var publishedCount = Model.Topics.Where(x => x.IsOpened).Count();
    var unpublishedCount = Model.Topics.Where(x => !x.IsOpened).Count();
}

<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<div class="header-section"> 
    <a class="btn btn-primary" asp-controller="Courses" asp-action="UserCourses">Back</a>
    <h2>Course "@Model.Name" topics</h2>
</div>

<hr />

<p class="create-topic">
    <a class="btn btn-info" asp-action="CreateTopic" asp-route-id="@Model.Id">Create new</a>
</p>

<h2>Published topics</h2>
@if (publishedCount == 0)
{
    <p class="info">This course doesn`t have any published topics.</p>
}
else
{
    <div class="li-content">
        <ol class="topiclist">
            @foreach (var item in Model.Topics)
            {
                if (item.IsOpened)
                {
                    <li>
                        <a class="topic" asp-controller="TopicBlocks" asp-action="Index" asp-route-id="@item.Id">
                            <h5>@Html.DisplayFor(modelItem => item.Name)</h5>
                            <span>@Html.DisplayFor(modelItem => item.Description)</span>
                            <i class="material-icons">@(item.IsOpened ? "visibility" : "visibility_off")</i>
                        </a>
                        <div class="edit-buttons">
                            <a class="btn btn-primary edit-delete-button" asp-action="EditTopic" asp-route-id="@item.Id">Edit</a>
                            <a class="btn btn-danger topic-delete-button" asp-action="DeleteTopic" asp-route-id="@item.Id">Delete</a>
                        </div>
                    </li>
                }
            }
        </ol>
    </div>
}

<h2>Unpublished topics</h2>

@if (unpublishedCount == 0)
{
    <p class="info">This course doesn`t have any unpublished topics.</p>
}
else
{
    <div class="li-content">
        <ol class="topiclist">
            @foreach (var item in Model.Topics)
            {
                if (!item.IsOpened)
                {
                    <li>
                        <a class="topic" asp-controller="TopicBlocks" asp-action="Index" asp-route-id="@item.Id">
                            <h5>@Html.DisplayFor(modelItem => item.Name)</h5>
                            <span>@Html.DisplayFor(modelItem => item.Description)</span>
                            <i class="material-icons">@(item.IsOpened ? "visibility" : "visibility_off")</i>
                        </a>
                        <div class="edit-buttons">
                            <a class="btn btn-primary edit-delete-button" asp-action="EditTopic" asp-route-id="@item.Id">Edit</a>
                            <a class="btn btn-danger topic-delete-button" asp-action="DeleteTopic" asp-route-id="@item.Id">Delete</a>
                        </div>
                    </li>
                }
            }
        </ol>
    </div>
}

<style>
    h2 {
        display: flex;
        justify-content: center;
        margin-top: 50px;
        margin-bottom: 30px;
    }

    .material-icons {
        position: absolute;
        top: 10px;
        right: 10px;
    }

    .info {
       font-size: 20px;
       width: 30%;
       padding-bottom: 15px;
       padding-left: 5%;
    }

    .create-topic {
        text-align: end;
        margin-right: 9%;
        margin-bottom: 15px;
    }

    .li-content {
        display: flex;
        justify-content: center;
    }

    .edit-buttons {
        text-align: center;
    }

    .topic-delete-button {
        margin-top: 5px;
    }

    .edit-delete-button, .topic-delete-button {
        width: 100px;
    }

    .topiclist {
        padding: 0;
        list-style: none;
        counter-reset: li;
        width: 90%;
    }


        .topiclist li {
            margin-bottom: 25px;
            display: flex;
            justify-content: start;
        }

        .topiclist h5 {
            font-size: 1.35em;
        }

        .topiclist .topic {
            position: relative;
            width: 90%;
            display: block;
            padding: .8em .4em 0.7em 3em;
            background: #eef3f2;
            color: #444;
            border-radius: .3em;
            margin-bottom: 1em;
            text-decoration: none;
        }

            .topiclist .topic:hover {
                background: #cbe7f8;
            }

            .topiclist .topic:before {
                content: counter(li);
                counter-increment: li;
                position: absolute;
                top: 0px;
                left: -1.5em;
                padding-top: 0.32em;
                vertical-align: middle;
                height: 3em;
                width: 3em;
                border: .3em solid #fff;
                background: #87ceeb;
                text-align: center;
                font-size: 25px;
                border-radius: 2em;
                color: #fff;
            }
</style>
